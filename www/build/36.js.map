{"version":3,"sources":["../../src/pages/adminhome/adminhome.module.ts","../../src/pages/adminhome/adminhome.ts"],"names":[],"mappings":"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","file":"36.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminHomePage } from './adminhome';\n\n@NgModule({\n  declarations: [\n    AdminHomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminHomePage),\n  ],\n})\nexport class AdminHomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/adminhome/adminhome.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { Workpermit } from '../../models/workpermit';\r\nimport { PouchService } from '../../pouch-service/pouch.service';\r\nimport { Material } from '../../models/material';\r\nimport { PopupProvider } from '../../pouch-service/popup';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-adminhome',\r\n  templateUrl: 'adminhome.html'\r\n})\r\nexport class AdminHomePage {\r\n  show: any = false;\r\n  showWork: any = false;\r\n  localStorageItem;\r\n  public user: any;\r\n  filteredWorkpermitLength: any;\r\n  filteredWorkpermit: Array<Workpermit> = [];\r\n  public workpermits: Array<Workpermit> = [];\r\n  dailyWo: any;\r\n  dailyWolength: any;\r\n  totalWolength: any;\r\n  currentDate;\r\n  faultRegistrylength: any;\r\n  deptWorkpermits: any;\r\n  equipmentLength: any;\r\n  deptWorkpermitslength: any;\r\n  dailyallReportlength: any;\r\n  dailyallReport: any;\r\n  materialList: any;\r\n\r\n  constructor(public navCtrl: NavController, public db: PouchService, public popUp: PopupProvider) {\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad AdminhomePage');\r\n    this.localStorageItem = JSON.parse(localStorage.getItem('user'));\r\n\r\n    this.db.getSupervisor(this.localStorageItem).then(item => {\r\n      this.user = item;\r\n    });\r\n\r\n    this._loadWorkpermits();\r\n    this.dailyWorkorder();\r\n    this.allWorkpermit();\r\n    this.allEquipments();\r\n    this.allFaultregistrys();\r\n    this.allReport();\r\n    this._loadMateriallist();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.popUp.displayPopUp();\r\n    this.localStorageItem = JSON.parse(localStorage.getItem('user'));\r\n    console.log('ionViewDidLoad ViewworkpermitPage');\r\n    this.db.getSupervisor(this.localStorageItem).then(item => {\r\n      this.user = item;\r\n    });\r\n\r\n    this._loadWorkpermits();\r\n    this.dailyWorkorder();\r\n    this.allWorkpermit();\r\n    this.allEquipments();\r\n    this.allFaultregistrys();\r\n    this.allReport();\r\n    this._loadMateriallist();\r\n  }\r\n\r\n  private _loadWorkpermits(): void {\r\n    this.db.getWorkpermits()\r\n      .then((workpermits: Array<Workpermit>) => {\r\n        this.filteredWorkpermit = workpermits.filter(data => data.astatus == true || data.fixed == true);\r\n        this.filteredWorkpermitLength = this.filteredWorkpermit.length;\r\n      })\r\n  }\r\n\r\n\r\n  private dailyWorkorder(): void {\r\n    this.db.getWorkorders().then((res: any) => {\r\n      this.totalWolength = res.length;\r\n      if (this.currentDate == undefined) {\r\n        this.dailyWo = res.filter(data => new Date(data.datecreated).toJSON().slice(0, 10).replace(/-/g, '-') == new Date().toJSON().slice(0, 10).replace(/-/g, '-'));\r\n        this.dailyWolength = this.dailyWo.length;\r\n      }\r\n      else {\r\n        this.dailyWo = res.filter(data => new Date(data.datecreated).toJSON().slice(0, 10).replace(/-/g, '-') == this.currentDate);\r\n        this.dailyWolength = this.dailyWo.length;\r\n      }\r\n    })\r\n  }\r\n\r\n  private allWorkpermit(): void {\r\n    this.db.getWorkpermits().then(res => {\r\n        this.deptWorkpermitslength = res.length;\r\n    })\r\n  }\r\n\r\n  private allEquipments(): void {\r\n    this.db.getEquipmentcats().then(res => {\r\n      this.equipmentLength = res.length;\r\n    })\r\n  }\r\n\r\n  private allFaultregistrys(): void {\r\n    this.db.getfaultregistrys().then(res => {\r\n      this.faultRegistrylength = res.length;\r\n    })\r\n  }\r\n\r\n  private _loadMateriallist() {\r\n    this.db.getmaterials()\r\n      .then((materialList: Array<Material>) => {\r\n        this.materialList = materialList.length;\r\n      })\r\n  }\r\n\r\n  private allReport(): void {\r\n    this.db.getdailyreports().then(res => {\r\n       this.dailyallReport = res.filter(data => data.datecreated == new Date().toJSON().slice(0, 10).replace(/-/g, '-'));\r\n       this.dailyallReportlength = this.dailyallReport.length;\r\n     })\r\n   }\r\n\r\n  toggleSelection(index) {\r\n    this.show = !this.show;\r\n    this.showWork = false;\r\n  }\r\n\r\n  toggleSelection2(index) {\r\n    this.showWork = !this.showWork;\r\n    this.show = false;\r\n  }\r\n\r\n  openManager() {\r\n    this.navCtrl.push('ManagersPage');\r\n  }\r\n\r\n  openSupervisor() {\r\n    this.navCtrl.push('EngineersPage')\r\n  }\r\n\r\n  openOperator() {\r\n    this.navCtrl.push('OperatorsPage')\r\n  }\r\n\r\n  openDailyreport() {\r\n    this.navCtrl.push('ViewdailyreportPage');\r\n  }\r\n\r\n  openEngineer() {\r\n    this.navCtrl.push('EngineersPage');\r\n  }\r\n\r\n  openMaterial(){\r\n    this.navCtrl.push('MaterialPage');\r\n  }\r\n\r\n  openRegistry() {\r\n    this.navCtrl.push('FaultregistryPage');\r\n  }\r\n\r\n  openPm() {\r\n    this.navCtrl.push('PreventivemaintenancePage');\r\n  }\r\n\r\n  openWorkorder() {\r\n    this.navCtrl.push('WorkorderPage');\r\n  }\r\n\r\n  openSpareparts() {\r\n    this.navCtrl.push('SparepartsPage');\r\n  }\r\n\r\n  openEquipments() {\r\n    this.navCtrl.push('EquipmentPage');\r\n  }\r\n\r\n  openWorkerschedules() {\r\n    this.navCtrl.push('WorkerschedulePage');\r\n  }\r\n\r\n  openWorkPermit() {\r\n    this.navCtrl.push('ViewworkpermitPage');\r\n    this.db.getWorkpermits()\r\n      .then((workpermits: Array<Workpermit>) => {\r\n        this.filteredWorkpermit = workpermits.filter(data => data.astatus == true);\r\n        this.filteredWorkpermit.forEach(item => {\r\n          item.astatus = false;\r\n          item.fixed = false;\r\n          this.db.updateWorkpermit(item).then(res => {\r\n            this._loadWorkpermits();\r\n          });\r\n        })\r\n      })\r\n  }\r\n\r\n  dailyWorkPermit() {\r\n    this.navCtrl.push('ViewworkpermitPage');\r\n  }\r\n\r\n  dailyWO() {\r\n    this.navCtrl.push('DailyworkorderPage');\r\n  }\r\n\r\n  dailyReport() {\r\n    this.navCtrl.push('DailyreportPage');\r\n  }\r\n\r\n  logOut() {\r\n    localStorage.removeItem('user');\r\n    this.navCtrl.push('LoginPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/adminhome/adminhome.ts"],"sourceRoot":""}