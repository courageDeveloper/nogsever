{"version":3,"sources":["../../src/pages/addmanager/addmanager.module.ts","../../src/pages/addmanager/addmanager.ts"],"names":[],"mappings":"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","file":"43.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddmanagerPage } from './addmanager';\n\n@NgModule({\n  declarations: [\n    AddmanagerPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddmanagerPage),\n  ]\n})\nexport class AddmanagerPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/addmanager/addmanager.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, ViewController, NavController, Platform, NavParams } from 'ionic-angular';\r\nimport { Supervisor } from '../../models/supervisor';\r\nimport { PouchService } from '../../pouch-service/pouch.service';\r\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\r\n/**\r\n * Generated class for the AddmanagerPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-addmanager',\r\n  templateUrl: 'addmanager.html',\r\n})\r\nexport class AddmanagerPage {\r\n  public manager: Supervisor;\r\n  add = false;\r\n  title = 'Edit';\r\n  search = false;\r\n  departments;\r\n  disabled = false;\r\n  errorMessageUser;\r\n  errorMessage;\r\n  emailValidate = \"[A-Za-z0-9._%+-]{3,}@[a-zA-Z]{3,}([.]{1}[a-zA-Z]{2,}|[.]{1}[a-zA-Z]{2,}[.]{1}[a-zA-Z]{2,})\";\r\n  managerForm = new FormGroup({\r\n    id: new FormControl(),\r\n    rev: new FormControl(),\r\n    name: new FormControl(),\r\n    mobile: new FormControl(),\r\n    address: new FormControl(),\r\n    email: new FormControl(),\r\n    sex: new FormControl(),\r\n    otp: new FormControl(),\r\n    position: new FormControl(),\r\n    departments: new FormControl(),\r\n    username: new FormControl(),\r\n    password: new FormControl()\r\n  })\r\n\r\n  constructor(public navCtrl: NavController, private formBuilder: FormBuilder, public viewCtrl: ViewController, public navParams: NavParams, public db: PouchService, public platform: Platform) {\r\n\r\n    this.departments = [\"Process Operations\", \"HSE\", \"Instrument\", \"Mechanical\", \"Electrical\"];\r\n\r\n    if (this.navParams.get('type') == 'Add') {\r\n      this.add = true;\r\n      this.title = 'Add';\r\n      this.manager = {\r\n        id: Math.round((new Date()).getTime()).toString(),\r\n        rev: '',\r\n        name: '',\r\n        mobile: '',\r\n        address: '',\r\n        email: '',\r\n        sex: 'Male',\r\n        position: '',\r\n        departments: 'Process Operations',\r\n        username: '',\r\n        password: '',\r\n        otp: '',\r\n        post: 'Manager',\r\n        workpermits: [],\r\n        workorders: [],\r\n        woalert: [],\r\n        faultregistrys: [],\r\n        dailyreports: []\r\n      }\r\n    }\r\n    else {\r\n      this.manager = this.navParams.get('manager');\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad AddmanagerPage');\r\n    this.managerForm = this.formBuilder.group({\r\n      id: [this.manager.id],\r\n      rev: [this.manager.rev],\r\n      name: [this.manager.name],\r\n      mobile: [this.manager.mobile],\r\n      address: [this.manager.address],\r\n      email: [this.manager.email, Validators.compose([Validators.required, Validators.pattern(this.emailValidate)])],\r\n      sex: [this.manager.sex],\r\n      position: [this.manager.position],\r\n      otp: [this.manager.otp],\r\n      departments: [this.manager.departments],\r\n      username: [this.manager.username],\r\n      password: [this.manager.password],\r\n      post: [this.manager.post],\r\n      woalert: [this.manager.woalert]\r\n    })\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.managerForm = this.formBuilder.group({\r\n      id: [this.manager.id],\r\n      rev: [this.manager.rev],\r\n      name: [this.manager.name],\r\n      mobile: [this.manager.mobile],\r\n      address: [this.manager.address],\r\n      email: [this.manager.email, Validators.compose([Validators.required, Validators.pattern(this.emailValidate)])],\r\n      sex: [this.manager.sex],\r\n      otp: [this.manager.otp],\r\n      position: [this.manager.position],\r\n      departments: [this.manager.departments],\r\n      username: [this.manager.username],\r\n      password: [this.manager.password],\r\n      post: [this.manager.post],\r\n      woalert: [this.manager.woalert]\r\n    })\r\n  }\r\n\r\n  submit() {\r\n    if (this.add) {\r\n      this.db.saveSupervisor(this.manager).then(res => {\r\n        this.viewCtrl.dismiss(res);\r\n      });\r\n    }\r\n    else {\r\n      //this.manager.workorders = [];\r\n      //this.manager.woalert = [];\r\n      this.db.updateSupervisor(this.manager).then(result => {\r\n        this.viewCtrl.dismiss();\r\n      });\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (this.add) {\r\n      this.disabled = false;\r\n      this.errorMessage = \"\";\r\n      this.db.getSupervisors().then(data => {\r\n        data.forEach(item => {\r\n          if (this.manager.username == item.username) {\r\n            this.errorMessage = \"This User already exists\";\r\n            this.disabled = true;\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  checkEmail() {\r\n    if (this.add) {\r\n      this.disabled = false;\r\n      this.errorMessageUser = \"\";\r\n      this.db.getSupervisors().then(data => {\r\n        data.forEach(item => {\r\n          if (this.manager.email == item.email) {\r\n            this.errorMessageUser = \"This email already exists\";\r\n            this.disabled = true;\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/addmanager/addmanager.ts"],"sourceRoot":""}